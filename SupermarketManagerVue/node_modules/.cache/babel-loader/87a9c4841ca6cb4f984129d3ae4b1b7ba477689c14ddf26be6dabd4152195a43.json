{"ast":null,"code":"/*\n * @Description: \n * @Author: Rabbiter\n * @Date: 2023-09-07 20:58:35\n */\nimport { getToken } from \"@/assets/js/auth\";\nimport axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport Cookies from \"js-cookie\";\nimport qs from 'qs';\n\n// const prefix_url = \"http://localhost:9291\"\nconst prefix_url = \"http://127.0.0.1:9291\";\n\n/*刷新Cooke的存活时间*/\nfunction refreshCookies() {\n  var token = getToken();\n  if (token) {\n    //刷新cookie\n    axios({\n      url: prefix_url + \"/checkedToken\",\n      method: \"GET\",\n      params: {\n        token: token\n      }\n    }).then(res => {\n      res = res.data;\n      if (res.code == 200) {\n        Cookies.set(\"token\", res.data.token, {\n          expires: 1 / 48\n        });\n        Cookies.set(\"employee\", JSON.stringify(res.data.employee), {\n          expires: 1 / 48\n        });\n      }\n    }).catch(e => {\n      popup(e, \"error\");\n    });\n  }\n  return token;\n}\n\n/*post请求*/\nexport function ajaxPost(url, param) {\n  return axios({\n    url: prefix_url + url,\n    method: \"POST\",\n    headers: {\n      'token': refreshCookies() //设置token 其中K名要和后端协调好\n    },\n\n    data: qs.stringify(param)\n  }).catch(e => {\n    console.log(e);\n    if (e.response == undefined || e.response.data == undefined) {\n      popup(e, \"error\");\n    } else {\n      popup(e.response.data, \"error\");\n    }\n  });\n}\n/*json请求*/\nexport function ajaxJson(url, param) {\n  return axios({\n    url: prefix_url + url,\n    method: \"POST\",\n    headers: {\n      'Content-Type': 'application/json',\n      'token': refreshCookies() //设置token 其中K名要和后端协调好\n    },\n\n    data: param\n  }).catch(e => {\n    console.log(e);\n    if (e.response == undefined || e.response.data == undefined) {\n      popup(e, \"error\");\n    } else {\n      popup(e.response.data, \"error\");\n    }\n  });\n}\n\n/*GET请求*/\nexport function ajaxGet(url, param) {\n  return axios({\n    url: prefix_url + url,\n    method: \"GET\",\n    headers: {\n      'token': refreshCookies() //设置token 其中K名要和后端协调好\n    },\n\n    params: param\n  }).catch(e => {\n    console.log(e);\n    if (e.response == undefined || e.response.data == undefined) {\n      popup(e, \"error\");\n    } else {\n      popup(e.response.data, \"error\");\n    }\n  });\n}\n/*给用户弹出相应的提示*/\nexport function popup(msg, type) {\n  switch (type) {\n    case \"warning\":\n      Message.warning(msg);\n      break;\n    case \"error\":\n      Message.error({\n        message: msg,\n        duration: 5000,\n        showClose: true\n      });\n      break;\n    case \"info\":\n      Message.info(msg);\n      break;\n    default:\n      Message.success(msg);\n  }\n}","map":{"version":3,"names":["getToken","axios","Message","Cookies","qs","prefix_url","refreshCookies","token","url","method","params","then","res","data","code","set","expires","JSON","stringify","employee","catch","e","popup","ajaxPost","param","headers","console","log","response","undefined","ajaxJson","ajaxGet","msg","type","warning","error","message","duration","showClose","info","success"],"sources":["D:/Work/WorkSpace/GitWorkSpace/TenShop/resource/SupermarketManager/src/SupermarketManagerVue/src/assets/js/common.js"],"sourcesContent":["/*\n * @Description: \n * @Author: Rabbiter\n * @Date: 2023-09-07 20:58:35\n */\nimport { getToken } from \"@/assets/js/auth\";\nimport axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport Cookies from \"js-cookie\";\nimport qs from 'qs';\n\n// const prefix_url = \"http://localhost:9291\"\nconst prefix_url = \"http://127.0.0.1:9291\"\n\n/*刷新Cooke的存活时间*/\nfunction refreshCookies() {\n    var token=getToken()\n    if (token){\n        //刷新cookie\n        axios({\n            url:prefix_url+\"/checkedToken\",\n            method:\"GET\",\n            params:{token:token}\n        }).then(res=>{\n            res=res.data\n\n            if (res.code==200){\n                Cookies.set(\"token\", res.data.token, {expires: 1/48})\n                Cookies.set(\"employee\", JSON.stringify(res.data.employee), {expires: 1/48})\n            }\n\n        }).catch((e)=>{\n            popup(e,\"error\")\n        })\n    }\n    return token;\n\n}\n\n/*post请求*/\nexport function ajaxPost(url, param) {\n    return axios({\n        url: prefix_url + url,\n        method: \"POST\",\n        headers:{\n            'token': refreshCookies() //设置token 其中K名要和后端协调好\n        },\n        data: qs.stringify(param)\n    }).catch((e) => {\n        \n        console.log(e);\n        if (\n            e.response == undefined ||\n            e.response.data == undefined\n        ) {\n            popup(e, \"error\")\n        } else {\n            popup(e.response.data, \"error\")\n        }\n\n    })\n}\n/*json请求*/\nexport function ajaxJson(url, param) {\n    return axios({\n        url: prefix_url + url,\n        method: \"POST\",\n        headers:{\n            'Content-Type':'application/json',\n            'token': refreshCookies() //设置token 其中K名要和后端协调好\n        },\n        data: param\n    }).catch((e) => {\n        console.log(e);\n        if (\n            e.response == undefined ||\n            e.response.data == undefined\n        ) {\n            popup(e, \"error\")\n        } else {\n            popup(e.response.data, \"error\")\n        }\n\n    })\n}\n\n/*GET请求*/\nexport function ajaxGet(url, param) {\n    return axios({\n        url: prefix_url + url,\n        method: \"GET\",\n        headers: {\n            'token': refreshCookies() //设置token 其中K名要和后端协调好\n        },\n        params:param\n    }).catch((e) => {\n        console.log(e);\n        if (\n            e.response == undefined ||\n            e.response.data == undefined\n        ) {\n            popup(e, \"error\")\n        } else {\n            popup(e.response.data, \"error\")\n        }\n\n    })\n}\n/*给用户弹出相应的提示*/\nexport function popup(msg, type) {\n    switch (type) {\n        case \"warning\":\n            Message.warning(msg);\n            break;\n        case \"error\":\n            Message.error({message: msg, duration: 5000, showClose: true});\n            break;\n        case \"info\":\n            Message.info(msg);\n            break;\n        default:\n            Message.success(msg);\n    }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}