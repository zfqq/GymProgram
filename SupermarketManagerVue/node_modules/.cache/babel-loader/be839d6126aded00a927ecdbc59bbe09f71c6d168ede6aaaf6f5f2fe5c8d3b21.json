{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { clearCookie, loginEmp } from \"@/assets/js/auth\";\nimport { ajaxGet, ajaxPost, popup } from \"@/assets/js/common\";\nimport Cookies from \"js-cookie\";\nexport default {\n  data() {\n    return {\n      personalFulVisable: false,\n      logoutVisable: false,\n      loginName: '',\n      logoutform: {},\n      circleUrl: loginEmp().headImg,\n      menu_catalogs: [],\n      rules: {\n        content: [{\n          required: true,\n          message: '内容不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    init() {\n      this.loginName = loginEmp().nickName;\n      ajaxGet(\"/empMenu\", {}).then(res => {\n        res = res.data;\n        if (res.code == 200) {\n          this.menu_catalogs = res.data;\n        }\n      });\n    },\n    /*个人资料*/\n    informationBtn() {\n      this.$router.push(\"/personal/information\");\n      popup(\"请完善个人的资料\");\n    },\n    /*账户退出*/\n    empExit() {\n      this.$confirm('确定要退出系统?', '警示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        ajaxGet(\"/exit\", this.pwdForm).then(res => {\n          res = res.data;\n          if (res.code == 200) {\n            popup(\"成功退出系统...\");\n            clearCookie(\"employee\");\n            clearCookie(\"token\");\n            this.$router.push('/');\n          } else {\n            popup(res.msg, \"error\");\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消操作'\n        });\n      });\n    },\n    /*注销账户*/\n    logoutCel(formName) {\n      this.$refs[formName].resetFields();\n      this.logoutform = {};\n      this.logoutVisable = false;\n    },\n    logoutSubmit(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          ajaxPost('/logout', {\n            content: this.logoutform.content\n          }).then(res => {\n            res = res.data;\n            if (res.code == 200) {\n              popup(\"注销成功\");\n              clearCookie(\"employee\");\n              clearCookie(\"token\");\n              this.logoutVisable = false;\n              this.$router.push('/');\n            } else {\n              popup(res.msg, \"error\");\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};","map":{"version":3,"names":["clearCookie","loginEmp","ajaxGet","ajaxPost","popup","Cookies","data","personalFulVisable","logoutVisable","loginName","logoutform","circleUrl","headImg","menu_catalogs","rules","content","required","message","trigger","methods","init","nickName","then","res","code","informationBtn","$router","push","empExit","$confirm","confirmButtonText","cancelButtonText","type","pwdForm","msg","catch","$message","logoutCel","formName","$refs","resetFields","logoutSubmit","validate","valid","mounted"],"sources":["src/views/index.vue"],"sourcesContent":["<template>\n    <el-container>\n        <el-header>\n            <div class=\"avatar\" @click=\"personalFulVisable=!personalFulVisable\">\n                <div class=\"demo-basic--circle \">\n                    <div class=\"block\">\n\n                        <el-avatar :size=\"50\" :src=\"circleUrl\"></el-avatar>\n                        {{loginName}}\n                    </div>\n                </div>\n            </div>\n            <h1>超市管理系统</h1>\n        </el-header>\n        <!--个人设置菜单-->\n        <div class=\"personalFul\" v-show=\"personalFulVisable\" @mouseout=\"personalFulVisable=!personalFulVisable\">\n            <ul>\n                <li @click=\"informationBtn\">个人资料完善</li>\n                <li @click=\"empExit\">退出</li>\n                <li @click=\"logoutVisable=true\">注销</li>\n            </ul>\n        </div>\n        <!--注销账户-->\n        <el-dialog\n                title=\"注销账户\"\n                :visible.sync=\"logoutVisable\"\n                width=\"70%\">\n            <el-form :model=\"logoutform\" :rules=\"rules\" ref=\"logoutform\" label-width=\"100px\" class=\"demo-ruleForm\">\n                <el-form-item label=\"内容\" prop=\"content\">\n                    <el-input v-model=\"logoutform.content\" placeholder=\"请填写“本人确定注销”\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"logoutSubmit('logoutform')\">确 定</el-button>\n                    <el-button @click=\"logoutCel('logoutform')\">取 消</el-button>\n                </el-form-item>\n            </el-form>\n        </el-dialog>\n\n\n        <el-container>\n            <el-aside>\n                <el-menu\n                        class=\"el-menu-vertical-demo\"\n                        background-color=\"#545c64\"\n                        text-color=\"#fff\"\n                        :router=\"true\"\n                        :unique-opened=\"true\"\n                        active-text-color=\"#ffd04b\">\n                    <el-submenu v-for=\"item in menu_catalogs\" :key=\"item.id\" :index=\"item.id+''\">\n                        <template slot=\"title\">\n                            <i :class=\"item.icon\" style=\"font-size: 26px;\">\n                                <b style=\"font-size: 18px;\"> {{item.label}}</b>\n                                </i>\n                            <span style=\"color: #ffffff\"> </span>\n                        </template>\n                        <el-menu-item-group>\n                            <el-menu-item v-for=\"(c) in item.children\" :key=\"c.id\" :index=\"c.purl\">\n<!--                                {{c.label}}-->\n                                    <i :class=\"c.icon\" style=\"font-size: 26px;\"> {{c.label}}</i>\n                                    <span style=\"color: #b8b8b8\"> </span>\n                            </el-menu-item>\n                        </el-menu-item-group>\n                    </el-submenu>\n                </el-menu>\n            </el-aside>\n            <el-main>\n                <router-view/>\n            </el-main>\n        </el-container>\n        <el-footer></el-footer>\n    </el-container>\n</template>\n<script>\n    import {clearCookie, loginEmp} from \"@/assets/js/auth\";\n    import {ajaxGet, ajaxPost, popup} from \"@/assets/js/common\";\n    import Cookies from \"js-cookie\";\n\n    export default {\n        data() {\n            return {\n                personalFulVisable: false,\n                logoutVisable: false,\n                loginName:'',\n                logoutform:{},\n                circleUrl: loginEmp().headImg,\n                menu_catalogs: [],\n                rules: {\n                    content: [{required: true, message: '内容不能为空', trigger: 'blur'},]\n                }\n\n            }\n        },\n        methods: {\n            init() {\n                this.loginName=loginEmp().nickName\n                ajaxGet(\"/empMenu\", {}).then(res => {\n                    res = res.data\n                    if (res.code == 200) {\n                        this.menu_catalogs = res.data\n                    }\n                })\n            },\n            /*个人资料*/\n            informationBtn(){\n              this.$router.push(\"/personal/information\")\n                popup(\"请完善个人的资料\")\n            },\n            /*账户退出*/\n            empExit() {\n                this.$confirm('确定要退出系统?', '警示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    ajaxGet(\"/exit\", this.pwdForm).then(res => {\n                        res = res.data\n                        if (res.code == 200) {\n                            popup(\"成功退出系统...\")\n                            clearCookie(\"employee\")\n                            clearCookie(\"token\")\n                            this.$router.push('/')\n                        } else {\n                            popup(res.msg, \"error\")\n                        }\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消操作'\n                    });\n                });\n            },\n            /*注销账户*/\n            logoutCel(formName) {\n                this.$refs[formName].resetFields()\n                this.logoutform={}\n                this.logoutVisable = false\n\n            },\n            logoutSubmit(formName) {\n                this.$refs[formName].validate((valid) => {\n                        if (valid) {\n                            ajaxPost('/logout', {content: this.logoutform.content}).then(res => {\n                                res = res.data\n                                if (res.code == 200) {\n                                    popup(\"注销成功\")\n                                    clearCookie(\"employee\")\n                                    clearCookie(\"token\")\n                                    this.logoutVisable = false\n                                    this.$router.push('/')\n                                } else {\n                                    popup(res.msg, \"error\")\n                                }\n                            })\n                        }})\n            }\n\n        },\n        mounted() {\n            this.init()\n        }\n    }\n</script>\n<style>\n    h1 {\n        display: inline-block;\n        float: right;\n        width: 80%;\n        text-align: center;\n    }\n\n    .avatar {\n        display: inline-block;\n        width: 200px;\n        float: right;\n    }\n\n    .personalFul {\n        background-color: #ffffff;\n        position: absolute;\n        z-index: 999999;\n        top: 58px;\n        right: 20px;\n        width: 151px;\n\n    }\n\n    .personalFul ul > li {\n        margin: 1px auto;\n        padding: 0px;\n        height: 20px;\n        color: #ffffff;\n        background-color: #303133;\n        list-style-type: none;\n    }\n\n    .personalFul ul > li:hover {\n        background-color: #fc4316;\n    }\n</style>\n"],"mappings":";AAyEA,SAAAA,WAAA,EAAAC,QAAA;AACA,SAAAC,OAAA,EAAAC,QAAA,EAAAC,KAAA;AACA,OAAAC,OAAA;AAEA;EACAC,KAAA;IACA;MACAC,kBAAA;MACAC,aAAA;MACAC,SAAA;MACAC,UAAA;MACAC,SAAA,EAAAV,QAAA,GAAAW,OAAA;MACAC,aAAA;MACAC,KAAA;QACAC,OAAA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IAEA;EACA;EACAC,OAAA;IACAC,KAAA;MACA,KAAAX,SAAA,GAAAR,QAAA,GAAAoB,QAAA;MACAnB,OAAA,iBAAAoB,IAAA,CAAAC,GAAA;QACAA,GAAA,GAAAA,GAAA,CAAAjB,IAAA;QACA,IAAAiB,GAAA,CAAAC,IAAA;UACA,KAAAX,aAAA,GAAAU,GAAA,CAAAjB,IAAA;QACA;MACA;IACA;IACA;IACAmB,eAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;MACAvB,KAAA;IACA;IACA;IACAwB,QAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAV,IAAA;QACApB,OAAA,eAAA+B,OAAA,EAAAX,IAAA,CAAAC,GAAA;UACAA,GAAA,GAAAA,GAAA,CAAAjB,IAAA;UACA,IAAAiB,GAAA,CAAAC,IAAA;YACApB,KAAA;YACAJ,WAAA;YACAA,WAAA;YACA,KAAA0B,OAAA,CAAAC,IAAA;UACA;YACAvB,KAAA,CAAAmB,GAAA,CAAAW,GAAA;UACA;QACA;MACA,GAAAC,KAAA;QACA,KAAAC,QAAA;UACAJ,IAAA;UACAf,OAAA;QACA;MACA;IACA;IACA;IACAoB,UAAAC,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAE,WAAA;MACA,KAAA9B,UAAA;MACA,KAAAF,aAAA;IAEA;IACAiC,aAAAH,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAI,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAxC,QAAA;YAAAY,OAAA,OAAAL,UAAA,CAAAK;UAAA,GAAAO,IAAA,CAAAC,GAAA;YACAA,GAAA,GAAAA,GAAA,CAAAjB,IAAA;YACA,IAAAiB,GAAA,CAAAC,IAAA;cACApB,KAAA;cACAJ,WAAA;cACAA,WAAA;cACA,KAAAQ,aAAA;cACA,KAAAkB,OAAA,CAAAC,IAAA;YACA;cACAvB,KAAA,CAAAmB,GAAA,CAAAW,GAAA;YACA;UACA;QACA;MAAA;IACA;EAEA;EACAU,QAAA;IACA,KAAAxB,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}