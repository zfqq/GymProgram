{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { loginEmp, removeToken } from \"@/assets/js/auth\";\nimport Cookies from \"js-cookie\";\nimport { ajaxPost, popup } from \"@/assets/js/common\";\nexport default {\n  data() {\n    return {\n      pwdForm: {},\n      rules: {\n        newPwd: [{\n          required: true,\n          message: \"新密码不能为空\",\n          trigger: \"blur\"\n        }, {\n          min: 6,\n          max: 8,\n          message: \"新密码长度为6-8位\",\n          trigger: \"blur\"\n        }],\n        oldPwd: [{\n          required: true,\n          message: \"旧密码不能为空\",\n          trigger: \"blur\"\n        }, {\n          min: 6,\n          max: 8,\n          message: \"旧密码长度为6-8位\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    init() {\n      this.pwdForm.username = loginEmp().username;\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.$confirm(\"确定修改密码?\", \"警示\", {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\",\n            type: \"warning\"\n          }).then(() => {\n            ajaxPost(\"/personal/edit_pwd\", this.pwdForm).then(res => {\n              res = res.data;\n              if (res.code == 200) {\n                popup(\"密码修改成功,请重新登录...\");\n                this.pwdForm = {\n                  username: this.pwdForm.username\n                };\n                Cookies.remove(\"employee\");\n                removeToken();\n                this.$router.push(\"/\");\n              } else {\n                popup(res.msg, \"error\");\n              }\n            });\n          }).catch(() => {\n            this.$message({\n              type: \"info\",\n              message: \"已取消操作\"\n            });\n          });\n        }\n      });\n    }\n  },\n  created() {\n    this.init();\n  }\n};","map":{"version":3,"names":["loginEmp","removeToken","Cookies","ajaxPost","popup","data","pwdForm","rules","newPwd","required","message","trigger","min","max","oldPwd","methods","init","username","resetForm","formName","$refs","resetFields","submitForm","validate","valid","$confirm","confirmButtonText","cancelButtonText","type","then","res","code","remove","$router","push","msg","catch","$message","created"],"sources":["src/views/personal/Edit_pwd.vue"],"sourcesContent":["<!--\n * @Description: \n * @Author: Rabbiter\n * @Date: 2023-09-07 20:58:35\n-->\n<template>\n    <div>\n        <el-breadcrumb separator=\"/\">\n            <el-breadcrumb-item>首页</el-breadcrumb-item>\n            <el-breadcrumb-item>个人中心 </el-breadcrumb-item>\n            <el-breadcrumb-item>密码修改</el-breadcrumb-item> </el-breadcrumb\n        ><br />\n        <div id=\"edit_pwd\">\n            <el-form\n                :model=\"pwdForm\"\n                :rules=\"rules\"\n                ref=\"pwdForm\"\n                label-width=\"100px\"\n                class=\"demo-ruleForm\"\n            >\n                <i class=\"iconfont icon-r-lock\" style=\"font-size: 32px\">\n                    <b style=\"font-size: 28px\">个人密码修改</b></i\n                >\n                <br />\n                <br />\n                <el-form-item label=\"账号\">\n                    <el-input disabled v-model=\"pwdForm.username\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"旧密码\" prop=\"oldPwd\">\n                    <el-input\n                        type=\"password\"\n                        v-model=\"pwdForm.oldPwd\"\n                    ></el-input>\n                </el-form-item>\n                <el-form-item label=\"新密码\" prop=\"newPwd\">\n                    <el-input\n                        type=\"password\"\n                        v-model=\"pwdForm.newPwd\"\n                    ></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button\n                        type=\"primary\"\n                        @click=\"submitForm('pwdForm')\"\n                        style=\"font-size: 18px\"\n                    >\n                        <i\n                            class=\"iconfont icon-r-yes\"\n                            style=\"font-size: 18px\"\n                        ></i>\n                        确定</el-button\n                    >\n                    <el-button\n                        @click=\"resetForm('pwdForm')\"\n                        style=\"font-size: 18px\"\n                    >\n                        <i\n                            class=\"iconfont icon-r-refresh\"\n                            style=\"font-size: 18px\"\n                        ></i>\n                        重置</el-button\n                    >\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n<script>\nimport { loginEmp, removeToken } from \"@/assets/js/auth\";\nimport Cookies from \"js-cookie\";\nimport { ajaxPost, popup } from \"@/assets/js/common\";\n\nexport default {\n    data() {\n        return {\n            pwdForm: {},\n            rules: {\n                newPwd: [\n                    {\n                        required: true,\n                        message: \"新密码不能为空\",\n                        trigger: \"blur\",\n                    },\n                    {\n                        min: 6,\n                        max: 8,\n                        message: \"新密码长度为6-8位\",\n                        trigger: \"blur\",\n                    },\n                ],\n                oldPwd: [\n                    {\n                        required: true,\n                        message: \"旧密码不能为空\",\n                        trigger: \"blur\",\n                    },\n                    {\n                        min: 6,\n                        max: 8,\n                        message: \"旧密码长度为6-8位\",\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n        };\n    },\n    methods: {\n        init() {\n            this.pwdForm.username = loginEmp().username;\n        },\n        resetForm(formName) {\n            this.$refs[formName].resetFields();\n        },\n        submitForm(formName) {\n            this.$refs[formName].validate((valid) => {\n                if (valid) {\n                    this.$confirm(\"确定修改密码?\", \"警示\", {\n                        confirmButtonText: \"确定\",\n                        cancelButtonText: \"取消\",\n                        type: \"warning\",\n                    })\n                        .then(() => {\n                            ajaxPost(\"/personal/edit_pwd\", this.pwdForm).then(\n                                (res) => {\n                                    res = res.data;\n                                    if (res.code == 200) {\n                                        popup(\"密码修改成功,请重新登录...\");\n                                        this.pwdForm = {\n                                            username: this.pwdForm.username,\n                                        };\n                                        Cookies.remove(\"employee\");\n                                        removeToken();\n                                        this.$router.push(\"/\");\n                                    } else {\n                                        popup(res.msg, \"error\");\n                                    }\n                                }\n                            );\n                        })\n                        .catch(() => {\n                            this.$message({\n                                type: \"info\",\n                                message: \"已取消操作\",\n                            });\n                        });\n                }\n            });\n        },\n    },\n    created() {\n        this.init();\n    },\n};\n</script>\n<style>\n#edit_pwd {\n    width: 50%;\n    margin: 50px auto;\n    background-color: #ffffff;\n    padding: 20px;\n}\n</style>"],"mappings":";AAoEA,SAAAA,QAAA,EAAAC,WAAA;AACA,OAAAC,OAAA;AACA,SAAAC,QAAA,EAAAC,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,KAAA;QACAC,MAAA,GACA;UACAC,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,GAAA;UACAC,GAAA;UACAH,OAAA;UACAC,OAAA;QACA,EACA;QACAG,MAAA,GACA;UACAL,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,GAAA;UACAC,GAAA;UACAH,OAAA;UACAC,OAAA;QACA;MAEA;IACA;EACA;EACAI,OAAA;IACAC,KAAA;MACA,KAAAV,OAAA,CAAAW,QAAA,GAAAjB,QAAA,GAAAiB,QAAA;IACA;IACAC,UAAAC,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAE,WAAA;IACA;IACAC,WAAAH,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAI,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAC,QAAA;YACAC,iBAAA;YACAC,gBAAA;YACAC,IAAA;UACA,GACAC,IAAA;YACA1B,QAAA,4BAAAG,OAAA,EAAAuB,IAAA,CACAC,GAAA;cACAA,GAAA,GAAAA,GAAA,CAAAzB,IAAA;cACA,IAAAyB,GAAA,CAAAC,IAAA;gBACA3B,KAAA;gBACA,KAAAE,OAAA;kBACAW,QAAA,OAAAX,OAAA,CAAAW;gBACA;gBACAf,OAAA,CAAA8B,MAAA;gBACA/B,WAAA;gBACA,KAAAgC,OAAA,CAAAC,IAAA;cACA;gBACA9B,KAAA,CAAA0B,GAAA,CAAAK,GAAA;cACA;YACA,EACA;UACA,GACAC,KAAA;YACA,KAAAC,QAAA;cACAT,IAAA;cACAlB,OAAA;YACA;UACA;QACA;MACA;IACA;EACA;EACA4B,QAAA;IACA,KAAAtB,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}