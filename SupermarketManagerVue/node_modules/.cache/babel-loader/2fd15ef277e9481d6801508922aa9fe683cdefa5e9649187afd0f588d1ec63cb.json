{"ast":null,"code":"/*\n * @Description: \n * @Author: Rabbiter\n * @Date: 2023-09-07 20:58:35\n */\nimport { getToken } from \"@/assets/js/auth\";\nimport axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport Cookies from \"js-cookie\";\nimport qs from 'qs';\n\n// const prefix_url = \"http://localhost:9291\"\nconst prefix_url = \"http://127.0.0.1:9291\";\n\n/*刷新Cooke的存活时间*/\nfunction refreshCookies() {\n  var token = getToken();\n  if (token) {\n    //刷新cookie\n    axios({\n      url: prefix_url + \"/checkedToken\",\n      method: \"GET\",\n      params: {\n        token: token\n      }\n    }).then(res => {\n      res = res.data;\n      if (res.code == 200) {\n        Cookies.set(\"token\", res.data.token, {\n          expires: 1 / 48\n        });\n        Cookies.set(\"employee\", JSON.stringify(res.data.employee), {\n          expires: 1 / 48\n        });\n      }\n    }).catch(() => {\n      popup(\"系统正忙\", \"error\");\n    });\n  }\n  return token;\n}\n\n/*post请求*/\nexport function ajaxPost(url, param) {\n  return axios({\n    url: prefix_url + url,\n    method: \"POST\",\n    headers: {\n      'token': refreshCookies() //设置token 其中K名要和后端协调好\n    },\n\n    data: qs.stringify(param)\n  }).catch(e => {\n    popup(e, \"error\");\n  });\n}\n/*json请求*/\nexport function ajaxJson(url, param) {\n  return axios({\n    url: prefix_url + url,\n    method: \"POST\",\n    headers: {\n      'Content-Type': 'application/json',\n      'token': refreshCookies() //设置token 其中K名要和后端协调好\n    },\n\n    data: param\n  }).catch(e => {\n    popup(e, \"error\");\n  });\n}\n\n/*GET请求*/\nexport function ajaxGet(url, param) {\n  return axios({\n    url: prefix_url + url,\n    method: \"GET\",\n    headers: {\n      'token': refreshCookies() //设置token 其中K名要和后端协调好\n    },\n\n    params: param\n  }).catch(e => {\n    popup(e, \"error\");\n  });\n}\n/*给用户弹出相应的提示*/\nexport function popup(msg, type) {\n  switch (type) {\n    case \"warning\":\n      Message.warning(msg);\n      break;\n    case \"error\":\n      Message.error(msg);\n      break;\n    case \"info\":\n      Message.info(msg);\n      break;\n    default:\n      Message.success(msg);\n  }\n}","map":{"version":3,"names":["getToken","axios","Message","Cookies","qs","prefix_url","refreshCookies","token","url","method","params","then","res","data","code","set","expires","JSON","stringify","employee","catch","popup","ajaxPost","param","headers","e","ajaxJson","ajaxGet","msg","type","warning","error","info","success"],"sources":["D:/Work/WorkSpace/GitWorkSpace/TenShop/resource/SupermarketManager/src/SupermarketManagerVue/src/assets/js/common.js"],"sourcesContent":["/*\n * @Description: \n * @Author: Rabbiter\n * @Date: 2023-09-07 20:58:35\n */\nimport { getToken } from \"@/assets/js/auth\";\nimport axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport Cookies from \"js-cookie\";\nimport qs from 'qs';\n\n// const prefix_url = \"http://localhost:9291\"\nconst prefix_url = \"http://127.0.0.1:9291\"\n\n/*刷新Cooke的存活时间*/\nfunction refreshCookies() {\n    var token=getToken()\n    if (token){\n        //刷新cookie\n        axios({\n            url:prefix_url+\"/checkedToken\",\n            method:\"GET\",\n            params:{token:token}\n        }).then(res=>{\n            res=res.data\n\n            if (res.code==200){\n                Cookies.set(\"token\", res.data.token, {expires: 1/48})\n                Cookies.set(\"employee\", JSON.stringify(res.data.employee), {expires: 1/48})\n            }\n\n        }).catch(()=>{\n            popup(\"系统正忙\",\"error\")\n        })\n    }\n    return token;\n\n}\n\n/*post请求*/\nexport function ajaxPost(url, param) {\n    return axios({\n        url: prefix_url + url,\n        method: \"POST\",\n        headers:{\n            'token': refreshCookies() //设置token 其中K名要和后端协调好\n        },\n        data: qs.stringify(param)\n    }).catch((e) => {\n        popup(e, \"error\")\n\n    })\n}\n/*json请求*/\nexport function ajaxJson(url, param) {\n    return axios({\n        url: prefix_url + url,\n        method: \"POST\",\n        headers:{\n            'Content-Type':'application/json',\n            'token': refreshCookies() //设置token 其中K名要和后端协调好\n        },\n        data: param\n    }).catch((e) => {\n        popup(e, \"error\")\n\n    })\n}\n\n/*GET请求*/\nexport function ajaxGet(url, param) {\n    return axios({\n        url: prefix_url + url,\n        method: \"GET\",\n        headers: {\n            'token': refreshCookies() //设置token 其中K名要和后端协调好\n        },\n        params:param\n    }).catch((e) => {\n        popup(e, \"error\")\n\n    })\n}\n/*给用户弹出相应的提示*/\nexport function popup(msg, type) {\n    switch (type) {\n        case \"warning\":\n            Message.warning(msg);\n            break;\n        case \"error\":\n            Message.error(msg);\n            break;\n        case \"info\":\n            Message.info(msg);\n            break;\n        default:\n            Message.success(msg);\n    }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}