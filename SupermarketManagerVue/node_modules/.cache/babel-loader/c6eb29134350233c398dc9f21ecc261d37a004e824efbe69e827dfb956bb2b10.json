{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ajaxPost, popup } from \"@/assets/js/common\";\nimport Cookies from 'js-cookie';\nexport default {\n  data() {\n    return {\n      loginForm: {\n        username: \"19881653720\",\n        password: \"123456\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '账号不能为空',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 8,\n          message: '密码长度为5-8位',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          ajaxPost(\"/login\", this.loginForm).then(res => {\n            res = res.data;\n            if (res.code == 200) {\n              Cookies.set(\"token\", res.data.token, {\n                expires: 1 / 48\n              });\n              Cookies.set(\"employee\", JSON.stringify(res.data.employee), {\n                expires: 1 / 48\n              });\n              popup(\"登录成功，请稍等...\");\n              this.$router.push(\"/index\");\n            } else {\n              popup(res.msg, \"warning\");\n            }\n          });\n        } else {\n          popup(\"账号或密码格式不正确！\", \"error\");\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","map":{"version":3,"names":["ajaxPost","popup","Cookies","data","loginForm","username","password","rules","required","message","trigger","min","max","methods","submitForm","formName","$refs","validate","valid","then","res","code","set","token","expires","JSON","stringify","employee","$router","push","msg","resetForm","resetFields"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\n    <div class=\"loginForm\">\n        <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n            <h3>超市管理系统</h3>\n            <el-form-item label=\"账号：\" prop=\"username\">\n                <el-input v-model=\"loginForm.username\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"密码：\" prop=\"password\">\n                <el-input type=\"password\" v-model=\"loginForm.password\"></el-input>\n            </el-form-item>\n            <el-form-item>\n                <el-button style=\"background-color: #f5f2c6\" @click=\"submitForm('loginForm')\">登录</el-button>\n                <el-button @click=\"resetForm('loginForm')\">重置</el-button>\n            </el-form-item>\n        </el-form>\n\n    </div>\n\n</template>\n<style>\n    .loginForm {\n        background-color: #a3f6f5;\n        width: 400px;\n        height: 250px;\n        margin: 200px auto;\n        text-align: center;\n        padding-top: 10px;\n        border-color: #555555;\n        border-style: solid;\n        border-width: 2px;\n        border-radius: 15px;\n        box-shadow: 10px 10px 5px #403c3c;\n    }\n\n    .loginForm input {\n        width: 260px;\n\n    }\n\n    h3 {\n        margin: 10px 0;\n    }\n\n    .loginForm button {\n        margin-right: 40px;\n    }\n</style>\n<script>\n    import {ajaxPost, popup} from \"@/assets/js/common\";\n    import Cookies from 'js-cookie'\n\n    export default {\n        data() {\n            return {\n                loginForm: {\n                    username: \"19881653720\",\n                    password: \"123456\"\n                },\n                rules: {\n                    username: [\n                        {required: true, message: '账号不能为空', trigger: 'blur'},\n                    ],\n                    password: [\n                        {required: true, message: '密码不能为空', trigger: 'blur'},\n                        {min: 6, max: 8, message: '密码长度为5-8位', trigger: 'blur'}\n                    ],\n                }\n            };\n        },\n        methods: {\n            submitForm(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        ajaxPost(\"/login\", this.loginForm).then(res => {\n                            res = res.data\n                            if (res.code == 200) {\n                                Cookies.set(\"token\", res.data.token, {expires: 1/48})\n                                Cookies.set(\"employee\", JSON.stringify(res.data.employee), {expires: 1/48})\n                                popup(\"登录成功，请稍等...\")\n                                this.$router.push(\"/index\")\n                            } else {\n                                popup(res.msg, \"warning\")\n                            }\n\n                        });\n                    } else {\n                        popup(\"账号或密码格式不正确！\", \"error\")\n                    }\n                });\n            },\n            resetForm(formName) {\n                this.$refs[formName].resetFields();\n            }\n        }\n    }\n</script>"],"mappings":";AAiDA,SAAAA,QAAA,EAAAC,KAAA;AACA,OAAAC,OAAA;AAEA;EACAC,KAAA;IACA;MACAC,SAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,QAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAG,OAAA;IACAC,WAAAC,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAE,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAlB,QAAA,gBAAAI,SAAA,EAAAe,IAAA,CAAAC,GAAA;YACAA,GAAA,GAAAA,GAAA,CAAAjB,IAAA;YACA,IAAAiB,GAAA,CAAAC,IAAA;cACAnB,OAAA,CAAAoB,GAAA,UAAAF,GAAA,CAAAjB,IAAA,CAAAoB,KAAA;gBAAAC,OAAA;cAAA;cACAtB,OAAA,CAAAoB,GAAA,aAAAG,IAAA,CAAAC,SAAA,CAAAN,GAAA,CAAAjB,IAAA,CAAAwB,QAAA;gBAAAH,OAAA;cAAA;cACAvB,KAAA;cACA,KAAA2B,OAAA,CAAAC,IAAA;YACA;cACA5B,KAAA,CAAAmB,GAAA,CAAAU,GAAA;YACA;UAEA;QACA;UACA7B,KAAA;QACA;MACA;IACA;IACA8B,UAAAhB,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAiB,WAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}