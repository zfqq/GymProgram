"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[802],{9686:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"detail_store_goods_in"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("库存管理 ")]),t("el-breadcrumb-item",[e._v("入库明细")])],1),t("br"),t("el-row",[t("el-col",{staticStyle:{"text-align":"left","padding-right":"10px"},attrs:{span:3}},[t("el-input",{attrs:{placeholder:"入库编号"},model:{value:e.searchForm.cn,callback:function(t){e.$set(e.searchForm,"cn",t)},expression:"searchForm.cn"}})],1),t("el-col",{attrs:{span:3}},[t("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.searchForm.goodsName,callback:function(t){e.$set(e.searchForm,"goodsName",t)},expression:"searchForm.goodsName"}})],1),t("el-col",{attrs:{span:16}},[t("span",[e._v("入库时间：")]),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"起始时间"},model:{value:e.searchForm.startCreateTime,callback:function(t){e.$set(e.searchForm,"startCreateTime",t)},expression:"searchForm.startCreateTime"}}),e._v(" - "),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"结束时间"},model:{value:e.searchForm.endCreateTime,callback:function(t){e.$set(e.searchForm,"endCreateTime",t)},expression:"searchForm.endCreateTime"}})],1),t("el-col",{attrs:{span:2}},[t("el-select",{attrs:{placeholder:"请选择状态",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.state1,callback:function(t){e.$set(e.searchForm,"state1",t)},expression:"searchForm.state1"}},[t("el-option",{attrs:{label:"正常",value:"0"}}),t("el-option",{attrs:{label:"删除",value:"1"}})],1)],1)],1),t("br"),t("el-row",[t("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitSearchForm}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索")]),t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"warning"},on:{click:e.goodsInBtn}},[t("i",{staticClass:"iconfont icon-r-right",staticStyle:{"font-size":"18px"}}),e._v(" 商品入库 ")])],1)],1),t("br"),t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{prop:"cn",width:"200",label:"编号"}}),t("el-table-column",{attrs:{prop:"goodsName","show-overflow-tooltip":!0,label:"商品名"}}),t("el-table-column",{attrs:{prop:"goodsPrice",label:"单价"}}),t("el-table-column",{attrs:{prop:"goodsNum",label:"入库数量"}}),t("el-table-column",{attrs:{prop:"expiryTime","show-overflow-tooltip":!0,label:"过期日期"}}),t("el-table-column",{attrs:{prop:"expiryTime","show-overflow-tooltip":!0,label:"是否过期"},scopedSlots:e._u([{key:"default",fn:function(o){return[new Date>Date.parse(o.row.expiryTime)?t("el-tag",{attrs:{type:"danger"}},[e._v("过期")]):t("el-tag",{attrs:{type:"success"}},[e._v("未过期")])]}}])}),t("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":!0,label:"入库时间"}}),t("el-table-column",{attrs:{prop:"storeName","show-overflow-tooltip":!0,label:"存储仓库"}}),t("el-table-column",{attrs:{prop:"supplierName","show-overflow-tooltip":!0,label:"供货商"}}),t("el-table-column",{attrs:{prop:"createby","show-overflow-tooltip":!0,label:"录入者"}}),t("el-table-column",{attrs:{prop:"state",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(o){return["0"==o.row.state?t("el-tag",{attrs:{type:"success"}},[e._v("入库")]):e._e(),"1"==o.row.state?t("el-tag",{attrs:{type:"danger"}},[e._v("过期")]):e._e(),"2"==o.row.state?t("el-tag",{attrs:{type:"danger"}},[e._v("下架")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"state1",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(o){return["0"==o.row.state1?t("el-tag",{attrs:{type:"success"}},[e._v("正常")]):"2"==o.row.state1?t("el-tag",{attrs:{type:"danger"}},[e._v("未处理")]):t("el-tag",{attrs:{type:"danger"}},[e._v("删除")])]}}])}),t("el-table-column",{attrs:{prop:"info","show-overflow-tooltip":!0,label:"备注"}}),t("el-table-column",{attrs:{width:"140",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return["0"==o.row.state1?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:function(t){return e.del(o.row.cn)}}},[t("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"18px"}}),e._v(" 删除 ")]):e._e()]}}])})],1),t("div",{staticStyle:{margin:"10px 0 15px 0"}},[t("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),t("el-dialog",{attrs:{title:"商品入库",visible:e.goodsInVisable,width:"50%"},on:{"update:visible":function(t){e.goodsInVisable=t}}},[e.selectGoodsVisable?t("el-form",{ref:"selectGoods",staticClass:"demo-ruleForm",attrs:{model:e.selectGoods,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"商品：",prop:"goodsId"}},[t("el-select",{attrs:{placeholder:"请选择商品",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.selectGoods.goodsId,callback:function(t){e.$set(e.selectGoods,"goodsId",t)},expression:"selectGoods.goodsId"}},e._l(e.options_goods,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"仓库：",prop:"storeId"}},[t("el-select",{attrs:{placeholder:"请选择存储仓库",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.selectGoods.storeId,callback:function(t){e.$set(e.selectGoods,"storeId",t)},expression:"selectGoods.storeId"}},e._l(e.options_store,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(t){return e.selectedGoods("selectGoods")}}},[t("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 确定")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(t){return e.closeSelectedGoods("selectGoods")}}},[e._v(" 关闭")])],1)],1):e._e(),e.newVisable?t("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{model:e.newForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"商品名称："}},[t("el-input",{attrs:{disabled:"",placeholder:"如：农夫山泉"},model:{value:e.newForm.goodsName,callback:function(t){e.$set(e.newForm,"goodsName",t)},expression:"newForm.goodsName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"商品数量：",prop:"goodsNum"}},[t("el-input",{attrs:{placeholder:"如：1"},model:{value:e.newForm.goodsNum,callback:function(t){e.$set(e.newForm,"goodsNum",t)},expression:"newForm.goodsNum"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"供货商：",prop:"supplierId"}},[t("el-select",{attrs:{placeholder:"请选择供货商",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.newForm.supplierId,callback:function(t){e.$set(e.newForm,"supplierId",t)},expression:"newForm.supplierId"}},e._l(e.options_suppliers,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"商品价格：",prop:"goodsPrice"}},[t("el-input",{attrs:{placeholder:"如：1.0"},model:{value:e.newForm.goodsPrice,callback:function(t){e.$set(e.newForm,"goodsPrice",t)},expression:"newForm.goodsPrice"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"生产日期：",prop:"birthTime"}},[t("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"生产日期"},model:{value:e.newForm.birthTime,callback:function(t){e.$set(e.newForm,"birthTime",t)},expression:"newForm.birthTime"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"过期日期：",prop:"expiryTime"}},[t("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"过期日期"},model:{value:e.newForm.expiryTime,callback:function(t){e.$set(e.newForm,"expiryTime",t)},expression:"newForm.expiryTime"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"备注："}},[t("el-input",{attrs:{type:"textarea",placeholder:"如：农夫山泉入库"},model:{value:e.newForm.info,callback:function(t){e.$set(e.newForm,"info",t)},expression:"newForm.info"}})],1)],1)],1),t("el-form-item",[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"warning"},on:{click:function(t){return e.submitNewForm("newForm")}}},[t("i",{staticClass:"iconfont icon-r-right",staticStyle:{"font-size":"18px"}}),e._v(" 入库")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(t){return e.saveCancel("newForm")}}},[e._v(" 取消")])],1)],1):e._e()],1)],1)},s=[],a=(o(7658),o(2567)),n=o(8151),l=o(6237),i=o(1030),c={data(){return{newVisable:!1,goodsInVisable:!1,selectGoodsVisable:!0,options_suppliers:[],searchForm:{pageSize:5},tableData:[],newForm:{cn:"",goodsId:"",goodsNum:"",goodsName:"",goodsPrice:"",supplierId:"",info:"",expiryTime:"",birthTime:"",storeId:""},options_goods:[],options_store:[],rules:{supplierId:[{required:!0,message:"供应商不能为空",trigger:"blur"}],goodsId:[{required:!0,message:"商品编号不能为空",trigger:"blur"}],storeId:[{required:!0,message:"仓库编号不能为空",trigger:"blur"}],goodsNum:[{required:!0,message:"商品数量不能为空",trigger:"blur"}],goodsPrice:[{required:!0,message:"商品价格不能为空",trigger:"blur"}],expiryTime:[{required:!0,message:"过期时间不能为空",trigger:"blur"}],birthTime:[{required:!0,message:"生产时间不能为空",trigger:"blur"}]},selectGoods:{}}},methods:{init(){this.newVisable=!1,this.selectGoodsVisable=!0,this.searchForm.startCreateTime>this.searchForm.endCreateTime?(0,n.gk)("结束时间不能小于开始时间","warning"):(0,l.O1)(this.searchForm).then((e=>{e=e.data,200==e.code?(this.tableData=e.data.records,this.searchForm.total=e.data.total,this.searchForm.pageSize=e.data.size,this.searchForm.currentPage=e.data.current):(0,n.gk)(e.msg,"error")}))},closeSelectedGoods(e){this.$refs[e].resetFields(),this.goodsInVisable=!1,this.newVisable=!1,this.selectGoodsVisable=!0},handleSizeChange(e){this.searchForm.pageSize=e,this.init(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.searchForm.currentPage=e,this.init(),console.log(`当前页: ${e}`)},submitSearchForm(){this.init()},goodsInBtn(){this.selectGoods={},this.goodsInVisable=!0,this.newForm={cn:"",goodsId:"",goodsNum:"",goodsName:"",goodsPrice:"",supplierId:"",info:"",expiryTime:"",birthTime:"",storeId:""}},detailStoreGoodsIn_goodsAll(){(0,a.QW)().then((e=>{e=e.data,200==e.code?this.options_goods=e.data:(0,n.gk)(e.msg,"error")}))},detailStoreGoodsIn_suppliers(){(0,l.Wm)().then((e=>{e=e.data,200==e.code?this.options_suppliers=e.data:(0,n.gk)(e.msg,"error")}))},detailStoreGoodsIn_storeAll(){(0,i.nH)({state:"0"}).then((e=>{if(e=e.data,200==e.code)for(var t of e.data)this.options_store.push({id:t.id,name:t.name});else(0,n.gk)(e.msg,"error")}))},selectedGoods(e){this.$refs[e].validate((e=>{e&&(0,a.gH)({id:this.selectGoods.goodsId}).then((e=>{e=e.data,200==e.code?(this.selectGoodsVisable=!1,this.newVisable=!0,this.newForm.storeId=this.selectGoods.storeId,this.selectGoods={storeId:"",goodsId:""},this.newForm.goodsId=e.data.id,this.newForm.goodsName=e.data.name,this.newForm.goodsPrice=e.data.purchashPrice):(0,n.gk)(e.msg,"error")}))}))},submitNewForm(e){this.$refs[e].validate((e=>{if(e){if(this.newForm.birthTime>=this.newForm.expiryTime)return(0,n.gk)("生成日期不能大于或等于过期日期","warning"),this.newForm.birthTime="",void(this.newForm.expiryTime="");(0,l.fj)(this.newForm).then((e=>{e=e.data,200==e.code?((0,n.gk)("入库成功"),this.init()):(0,n.gk)(e.msg,"error")}))}}))},saveCancel(e){this.$refs[e].resetFields(),this.newVisable=!1,this.selectGoodsVisable=!0},del(e){this.$confirm("确定删除这条记录？","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,l.ff)({cn:e}).then((e=>{e=e.data,200==e.code?((0,n.gk)("操作成功"),this.searchForm.state1="0",this.init()):(0,n.gk)(e.msg,"error")}))})).catch((()=>{this.$message({type:"info",message:"已取消操作"})}))}},mounted(){this.searchForm.state1="0",this.detailStoreGoodsIn_goodsAll(),this.detailStoreGoodsIn_storeAll(),this.detailStoreGoodsIn_suppliers(),this.init()}},u=c,d=o(3736),m=(0,d.Z)(u,r,s,!1,null,null,null),p=m.exports},2567:function(e,t,o){o.d(t,{M8:function(){return d},QW:function(){return u},Vx:function(){return i},Xx:function(){return m},ZH:function(){return l},a1:function(){return n},gH:function(){return c},mJ:function(){return a}});var r=o(8151);const s="/goods_management/goods";function a(e){return(0,r.tB)(s+"/queryPageByQo",e)}function n(e){return(0,r.tB)(s+"/save",e)}function l(e){return(0,r.tB)(s+"/upOrdown",e)}function i(e){return(0,r.tB)(s+"/update",e)}function c(e){return(0,r.Ck)(s+"/queryGoodsById",e)}function u(){return(0,r.Ck)(s+"/selected_goodsAll",{})}function d(){return(0,r.Ck)(s+"/selected_storeAll",{})}function m(e){return(0,r.tB)(s+"/returnGoods",e)}},6237:function(e,t,o){o.d(t,{O1:function(){return l},Tu:function(){return g},VK:function(){return c},Wm:function(){return u},Wy:function(){return f},XX:function(){return m},_P:function(){return d},ff:function(){return i},fj:function(){return n},l0:function(){return h},pd:function(){return p}});var r=o(8151);const s="/inventory_management/detail_store_goods_in",a="/inventory_management/detail_store_goods_out";function n(e){return(0,r.tB)(s+"/save",e)}function l(e){return(0,r.tB)(s+"/queryPageByQo",e)}function i(e){return(0,r.tB)(s+"/delIn",e)}function c(e){return(0,r.tB)(a+"/delOut",e)}function u(){return(0,r.Ck)(s+"/queryOptionsSuppliers",{})}function d(e){return(0,r.tB)(a+"/queryPageByQoOut",e)}function m(){return(0,r.Ck)(a+"/initOutOptions",{})}function p(e){return(0,r.Ck)(a+"/changeOutGoods",e)}function f(e){return(0,r.Ck)(a+"/changeOutStore",e)}function g(e){return(0,r.tB)(a+"/queryOutGoods",e)}function h(e){return(0,r.tB)(a+"/save",e)}},1030:function(e,t,o){o.d(t,{Vx:function(){return l},a1:function(){return n},jK:function(){return i},nH:function(){return a}});var r=o(8151);const s="/inventory_management/store";function a(e){return(0,r.tB)(s+"/list",e)}function n(e){return(0,r.tB)(s+"/save",e)}function l(e){return(0,r.tB)(s+"/update",e)}function i(e){return(0,r.tB)(s+"/deactivate",{sid:e})}}}]);
//# sourceMappingURL=802.da53862e.js.map