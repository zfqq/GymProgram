"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[637],{6637:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"sale_records"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("会员管理")]),t("el-breadcrumb-item",[e._v("消课记录")])],1),t("br"),t("el-row",[t("el-col",{attrs:{span:4}},[t("span",[e._v("会员卡号：")]),t("el-input",{staticStyle:{height:"21px",width:"130px"},attrs:{placeholder:"会员卡号："},model:{value:e.searchForm.cn,callback:function(t){e.$set(e.searchForm,"cn",t)},expression:"searchForm.cn"}})],1),t("el-col",{attrs:{span:10}},[t("span",[e._v("消课时间：")]),t("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"起始时间"},model:{value:e.searchForm.startSellTime,callback:function(t){e.$set(e.searchForm,"startSellTime",t)},expression:"searchForm.startSellTime"}}),e._v(" - "),t("el-date-picker",{staticStyle:{width:"140px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"结束时间"},model:{value:e.searchForm.endSellTime,callback:function(t){e.$set(e.searchForm,"endSellTime",t)},expression:"searchForm.endSellTime"}})],1)],1),t("br"),t("el-row",[t("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:e.submitSearchForm}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索")])],1)],1),t("br"),t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{prop:"cardnumber",width:"200",label:"会员卡号"}}),t("el-table-column",{attrs:{prop:"membername",label:"会员姓名"}}),t("el-table-column",{attrs:{prop:"classname",label:"消课课程"}}),t("el-table-column",{attrs:{prop:"cancetime","show-overflow-tooltip":!0,label:"消课时间"}}),t("el-table-column",{attrs:{prop:"canceemname",label:"消课教练"}}),t("el-table-column",{attrs:{width:"240",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(t){return e.detailBtn(r.row,r.row.classid)}}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 明细 ")])]}}])})],1),t("div",{staticStyle:{margin:"10px 0 15px 0"}},[t("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),t("el-dialog",{attrs:{title:"消课明细",visible:e.detailSaleRecordsVisable,width:"80%"},on:{"update:visible":function(t){e.detailSaleRecordsVisable=t}}},[t("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.saleRecordForm,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"会员卡号："}},[t("el-input",{attrs:{readonly:""},model:{value:e.saleRecordForm.cardnumber,callback:function(t){e.$set(e.saleRecordForm,"cardnumber",t)},expression:"saleRecordForm.cardnumber"}})],1),t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"会员姓名："}},[t("el-input",{attrs:{readonly:""},model:{value:e.saleRecordForm.membername,callback:function(t){e.$set(e.saleRecordForm,"membername",t)},expression:"saleRecordForm.membername"}})],1),t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"消课名称："}},[t("el-input",{attrs:{readonly:""},model:{value:e.saleRecordForm.classname,callback:function(t){e.$set(e.saleRecordForm,"classname",t)},expression:"saleRecordForm.classname"}})],1),t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"消课教练："}},[t("el-input",{attrs:{readonly:""},model:{value:e.saleRecordForm.canceemname,callback:function(t){e.$set(e.saleRecordForm,"canceemname",t)},expression:"saleRecordForm.canceemname"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",[t("el-button",{attrs:{type:"info"},on:{click:function(t){e.detailSaleRecordsVisable=!1}}},[e._v("关闭")])],1)],1)],1)],1)],1)],1)},n=[],o=r(8151),s=r(9183),l={data(){return{detailSaleRecordsVisable:!1,searchForm:{pageSize:5},tableData:[],saleRecordForm:{cn:"",sellway:"",info:"",sellTotal:"",sellTotalmoney:"",type:"0",detailSaleRecords:[]}}},methods:{init(){this.searchForm.startSellTime>this.searchForm.endSellTime?(0,o.gk)("结束时间不能小于开始时间","warning"):(0,s.ZA)(this.searchForm).then((e=>{e=e.data,200==e.code?(this.tableData=e.data.records,this.searchForm.total=e.data.total,this.searchForm.pageSize=e.data.size,this.searchForm.currentPage=e.data.current):(0,o.gk)(e.msg,"error")}))},del(e){this.$confirm("确定删除这条记录？","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,s.lk)({cn:e}).then((e=>{e=e.data,200==e.code?((0,o.gk)("操作成功"),this.init()):(0,o.gk)(e.msg,"error")}))})).catch((()=>{this.$message({type:"info",message:"已取消操作"})}))},detailBtn(e){this.saleRecordForm={cn:"",sellway:"",info:"",sellTotal:"",sellTotalmoney:"",type:"0",detailSaleRecords:[]},this.saleRecordForm={...e},this.detailSaleRecordsVisable=!0},handleSizeChange(e){this.searchForm.pageSize=e,this.init(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.searchForm.currentPage=e,this.init(),console.log(`当前页: ${e}`)},submitSearchForm(){this.init()}},mounted(){this.init()}},c=l,i=r(3736),u=(0,i.Z)(c,a,n,!1,null,null,null),d=u.exports},9183:function(e,t,r){r.d(t,{Mg:function(){return c},PA:function(){return l},ZA:function(){return u},lk:function(){return i},sJ:function(){return s}});var a=r(8151);const n="/sale_management/sale_record",o="/suspclasses/cancel";function s(){return(0,a.Ck)(n+"/getCn",{})}function l(){return(0,a.Ck)(n+"/getOptionSaleRecordsGoods",{})}function c(e){return(0,a.ml)(n+"/saveSaleRecords",e)}function i(e){return(0,a.Ck)(n+"/delSaleRecords",e)}function u(e){return(0,a.tB)(o+"/queryCourseCancellation",e)}},9253:function(e,t,r){r.d(t,{LP:function(){return o},Nx:function(){return l},_5:function(){return c},gy:function(){return s}});var a=r(4858);const n="token";function o(){return a.Z.get(n)}function s(){return a.Z.remove(n)}function l(){let e=a.Z.get("employee");return JSON.parse(e)}function c(e){a.Z.remove(e)}},8151:function(e,t,r){r.d(t,{Ck:function(){return p},gk:function(){return h},ml:function(){return m},tB:function(){return d}});var a=r(9253),n=r(6154),o=r(4720),s=r(4858),l=r(129),c=r.n(l);const i="http://59.110.94.218:9291";function u(){var e=(0,a.LP)();return e&&(0,n.Z)({url:i+"/checkedToken",method:"GET",params:{token:e}}).then((e=>{e=e.data,200==e.code&&(s.Z.set("token",e.data.token,{expires:1/48}),s.Z.set("employee",JSON.stringify(e.data.employee),{expires:1/48}))})).catch((e=>{console.log(e)})),e}function d(e,t){return(0,n.Z)({url:i+e,method:"POST",headers:{token:u()},data:c().stringify(t)}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?h(e,"error"):h(e.response.data,"error")}))}function m(e,t){return(0,n.Z)({url:i+e,method:"POST",headers:{"Content-Type":"application/json",token:u()},data:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?h(e,"error"):h(e.response.data,"error")}))}function p(e,t){return(0,n.Z)({url:i+e,method:"GET",headers:{token:u()},params:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?h(e,"error"):h(e.response.data,"error")}))}function h(e,t){switch(t){case"warning":o.Message.warning(e);break;case"error":o.Message.error({message:e,duration:5e3,showClose:!0});break;case"info":o.Message.info(e);break;default:o.Message.success(e)}}},4858:function(e,t){
/*! js-cookie v3.0.1 | MIT */
function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}var a={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function n(e,t){function a(a,n,o){if("undefined"!==typeof document){o=r({},t,o),"number"===typeof o.expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in o)o[l]&&(s+="; "+l,!0!==o[l]&&(s+="="+o[l].split(";")[0]));return document.cookie=a+"="+e.write(n,a)+s}}function o(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],a={},n=0;n<r.length;n++){var o=r[n].split("="),s=o.slice(1).join("=");try{var l=decodeURIComponent(o[0]);if(a[l]=e.read(s,l),t===l)break}catch(c){}}return t?a[t]:a}}return Object.create({set:a,get:o,remove:function(e,t){a(e,"",r({},t,{expires:-1}))},withAttributes:function(e){return n(this.converter,r({},this.attributes,e))},withConverter:function(e){return n(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var o=n(a,{path:"/"});t["Z"]=o}}]);
//# sourceMappingURL=637.e8ee0db9.js.map