"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[657],{6657:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"searchForm"},[t("div",{staticClass:"column"},[t("span",[e._v("商品名：")]),t("el-input",{staticStyle:{height:"21px",width:"300px"},attrs:{placeholder:"请输入商品名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("div",{staticClass:"column"},[t("el-button",{attrs:{type:"success"},on:{click:e.submitSearchForm}},[e._v("搜索")])],1)]),t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{width:"200",type:"index",label:"序号"}}),t("el-table-column",{attrs:{prop:"coverUrl",label:"封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{attrs:{height:"60px",src:e.row.coverUrl}})]}}])}),t("el-table-column",{attrs:{prop:"name",label:"商品名"}}),t("el-table-column",{attrs:{prop:"purchashPrice",label:"进货单价"}}),t("el-table-column",{attrs:{prop:"goodsNum",label:"入库数量"}}),t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return e.goodsInBtn(r.row)}}},[e._v("入库 ")])]}}])})],1),t("div",{staticStyle:{margin:"10px 0 15px 0"}},[t("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),t("el-dialog",{attrs:{title:"商品入库",visible:e.goodsInVisable,width:"50%"},on:{"update:visible":function(t){e.goodsInVisable=t}}},[e.selectGoodsVisable?t("el-form",{ref:"selectGoods",staticClass:"demo-ruleForm",attrs:{model:e.selectGoods,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"商品：",prop:"goodsId"}},[t("el-select",{attrs:{disabled:"",placeholder:"请选择商品",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.selectGoods.goodsId,callback:function(t){e.$set(e.selectGoods,"goodsId",t)},expression:"selectGoods.goodsId"}},e._l(e.options_goods,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"仓库：",prop:"storeId"}},[t("el-select",{attrs:{placeholder:"请选择存储仓库",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.selectGoods.storeId,callback:function(t){e.$set(e.selectGoods,"storeId",t)},expression:"selectGoods.storeId"}},e._l(e.options_store,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{width:"40%"}},[t("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return e.selectedGoods("selectGoods")}}},[e._v("确定")]),t("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.closeSelectedGoods("selectGoods")}}},[e._v("关闭")])],1)],1):e._e(),e.newVisable?t("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{size:"mini",model:e.newForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"商品名："}},[t("el-input",{attrs:{readonly:"",placeholder:"如：农夫山泉"},model:{value:e.newForm.goodsName,callback:function(t){e.$set(e.newForm,"goodsName",t)},expression:"newForm.goodsName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"商品数量：",prop:"goodsNum"}},[t("el-input",{attrs:{placeholder:"如："+e.newGoodsNum},model:{value:e.newForm.goodsNum,callback:function(t){e.$set(e.newForm,"goodsNum",t)},expression:"newForm.goodsNum"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"供货商：",prop:"supplierId"}},[t("el-select",{attrs:{placeholder:"请选择供货商",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.newForm.supplierId,callback:function(t){e.$set(e.newForm,"supplierId",t)},expression:"newForm.supplierId"}},e._l(e.options_suppliers,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"商品价格：",prop:"goodsPrice"}},[t("el-input",{attrs:{placeholder:"如：1.0"},model:{value:e.newForm.goodsPrice,callback:function(t){e.$set(e.newForm,"goodsPrice",t)},expression:"newForm.goodsPrice"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"生产日期：",prop:"birthTime"}},[t("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"生产日期"},model:{value:e.newForm.birthTime,callback:function(t){e.$set(e.newForm,"birthTime",t)},expression:"newForm.birthTime"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"过期日期：",prop:"expiryTime"}},[t("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"过期日期"},model:{value:e.newForm.expiryTime,callback:function(t){e.$set(e.newForm,"expiryTime",t)},expression:"newForm.expiryTime"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticStyle:{width:"82%"},attrs:{label:"备注："}},[t("el-input",{attrs:{type:"textarea",placeholder:"如：农夫山泉入库"},model:{value:e.newForm.info,callback:function(t){e.$set(e.newForm,"info",t)},expression:"newForm.info"}})],1)],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitNewForm("newForm")}}},[e._v("入库")]),t("el-button",{on:{click:function(t){return e.saveCancel("newForm")}}},[e._v("取消")])],1)],1):e._e()],1)],1)},n=[],s=(r(7658),r(8151)),i=(r(3965),r(4814)),a=r(2567),l=r(6237),u=r(1030),c={data(){return{newVisable:!1,goodsInVisable:!1,selectGoodsVisable:!0,newGoodsNum:"",newForm:{cn:"",goodsId:"",goodsNum:"",goodsName:"",goodsPrice:"",info:"",expiryTime:"",birthTime:"",storeId:""},tableData:[],searchForm:{total:0,currentPage:1,pageSize:10,state:"0"},options_goods:[],options_store:[],options_suppliers:[],selectGoods:{},rules:{supplierId:[{required:!0,message:"供应商不能为空",trigger:"blur"}],goodsId:[{required:!0,message:"商品编号不能为空",trigger:"blur"}],storeId:[{required:!0,message:"仓库编号不能为空",trigger:"blur"}],goodsNum:[{required:!0,message:"商品数量不能为空",trigger:"blur"}],goodsPrice:[{required:!0,message:"商品价格不能为空",trigger:"blur"}],expiryTime:[{required:!0,message:"过期时间不能为空",trigger:"blur"}],birthTime:[{required:!0,message:"生产时间不能为空",trigger:"blur"}]}}},methods:{init(){(0,i.gQ)(this.searchForm).then((e=>{e=e.data,200==e.code?(console.log(e.data),this.tableData=e.data.records,this.searchForm.total=e.data.total,this.searchForm.pageSize=e.data.size,this.searchForm.currentPage=e.data.current):(0,s.gk)(e.msg,"error")}))},handleSizeChange(e){this.searchForm.pageSize=e,this.init(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.searchForm.currentPage=e,this.init(),console.log(`当前页: ${e}`)},submitSearchForm(){this.init()},detailStoreGoodsIn_goodsAll(){(0,a.QW)().then((e=>{e=e.data,200==e.code?this.options_goods=e.data:(0,s.gk)(e.msg,"error")}))},detailStoreGoodsIn_suppliers(){(0,l.Wm)().then((e=>{e=e.data,200==e.code?this.options_suppliers=e.data:(0,s.gk)(e.msg,"error")}))},detailStoreGoodsIn_storeAll(){(0,u.nH)({state:"0"}).then((e=>{if(e=e.data,200==e.code)for(var t of e.data)this.options_store.push({id:t.id,name:t.name});else(0,s.gk)(e.msg,"error")}))},selectedGoods(e){this.$refs[e].validate((e=>{e&&(0,a.gH)({id:this.selectGoods.goodsId}).then((e=>{e=e.data,200==e.code?(this.selectGoodsVisable=!1,this.newVisable=!0,this.newForm.storeId=this.selectGoods.storeId,this.newForm.goodsId=e.data.id,this.newForm.goodsName=e.data.name,this.newForm.goodsPrice=e.data.purchashPrice):(0,s.gk)(e.msg,"error")}))}))},closeSelectedGoods(e){this.$refs[e].resetFields(),this.goodsInVisable=!1,this.newVisable=!1,this.selectGoodsVisable=!0,this.selectGoods={}},submitNewForm(e){this.$refs[e].validate((e=>{e&&(0,l.fj)(this.newForm).then((e=>{e=e.data,200==e.code?((0,s.gk)("入库成功"),this.goodsInVisable=!1,this.selectGoodsVisable=!0,this.newVisable=!1,this.init()):(0,s.gk)(e.msg,"error")}))}))},saveCancel(e){this.$refs[e].resetFields(),this.newVisable=!1,this.selectGoodsVisable=!0},goodsInBtn(e){this.selectGoods.goodsId=e.id,this.newGoodsNum=e.goodsNum,this.goodsInVisable=!0}},mounted(){this.searchForm.state1="0",this.detailStoreGoodsIn_goodsAll(),this.detailStoreGoodsIn_storeAll(),this.detailStoreGoodsIn_suppliers(),this.init()}},d=c,m=r(3736),p=(0,m.Z)(d,o,n,!1,null,null,null),f=p.exports},2567:function(e,t,r){r.d(t,{M8:function(){return d},QW:function(){return c},Vx:function(){return l},Xx:function(){return m},ZH:function(){return a},a1:function(){return i},gH:function(){return u},mJ:function(){return s}});var o=r(8151);const n="/goods_management/goods";function s(e){return(0,o.tB)(n+"/queryPageByQo",e)}function i(e){return(0,o.tB)(n+"/save",e)}function a(e){return(0,o.tB)(n+"/upOrdown",e)}function l(e){return(0,o.tB)(n+"/update",e)}function u(e){return(0,o.Ck)(n+"/queryGoodsById",e)}function c(){return(0,o.Ck)(n+"/selected_goodsAll",{})}function d(){return(0,o.Ck)(n+"/selected_storeAll",{})}function m(e){return(0,o.tB)(n+"/returnGoods",e)}},3965:function(e,t,r){r.d(t,{e9:function(){return a},mJ:function(){return s},nI:function(){return i}});var o=r(8151);const n="/goods_management/goods_store";function s(e){return(0,o.tB)(n+"/queryPageByQo",e)}function i(e){return(0,o.Ck)(n+"/queryGoodsStoreById",e)}function a(e){return(0,o.tB)(n+"/updateInventory",e)}},6237:function(e,t,r){r.d(t,{O1:function(){return a},Tu:function(){return g},VK:function(){return u},Wm:function(){return c},Wy:function(){return f},XX:function(){return m},_P:function(){return d},ff:function(){return l},fj:function(){return i},l0:function(){return h},pd:function(){return p}});var o=r(8151);const n="/inventory_management/detail_store_goods_in",s="/inventory_management/detail_store_goods_out";function i(e){return(0,o.tB)(n+"/save",e)}function a(e){return(0,o.tB)(n+"/queryPageByQo",e)}function l(e){return(0,o.tB)(n+"/delIn",e)}function u(e){return(0,o.tB)(s+"/delOut",e)}function c(){return(0,o.Ck)(n+"/queryOptionsSuppliers",{})}function d(e){return(0,o.tB)(s+"/queryPageByQoOut",e)}function m(){return(0,o.Ck)(s+"/initOutOptions",{})}function p(e){return(0,o.Ck)(s+"/changeOutGoods",e)}function f(e){return(0,o.Ck)(s+"/changeOutStore",e)}function g(e){return(0,o.tB)(s+"/queryOutGoods",e)}function h(e){return(0,o.tB)(s+"/save",e)}},4814:function(e,t,r){r.d(t,{Kj:function(){return a},WB:function(){return i},gQ:function(){return s},lQ:function(){return u},rb:function(){return l}});var o=r(8151);const n="/inventory_management/detail_store_goods/notice";function s(e){return(0,o.tB)(n+"/queryPageNoticeIn",e)}function i(e){return(0,o.tB)(n+"/queryPageNoticeOut_shelves",e)}function a(e){return(0,o.tB)(n+"/saveOut_shelves",e)}function l(e){return(0,o.tB)(n+"/queryPageNoticeOut_untreated",e)}function u(e){return(0,o.tB)(n+"/resolveOutUntreatedForm",e)}},1030:function(e,t,r){r.d(t,{Vx:function(){return a},a1:function(){return i},jK:function(){return l},nH:function(){return s}});var o=r(8151);const n="/inventory_management/store";function s(e){return(0,o.tB)(n+"/list",e)}function i(e){return(0,o.tB)(n+"/save",e)}function a(e){return(0,o.tB)(n+"/update",e)}function l(e){return(0,o.tB)(n+"/deactivate",{sid:e})}}}]);
//# sourceMappingURL=657.51ac0e46.js.map