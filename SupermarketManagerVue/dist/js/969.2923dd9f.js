"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[969],{8969:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"employee_index"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("人事管理 ")]),t("el-breadcrumb-item",[e._v("员工管理")])],1),t("br"),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"用户名"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),t("el-col",{attrs:{span:8}},[t("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"姓名"},model:{value:e.searchForm.nickName,callback:function(t){e.$set(e.searchForm,"nickName",t)},expression:"searchForm.nickName"}})],1),t("el-col",{attrs:{span:8}},[t("el-input",{staticStyle:{width:"95%"},attrs:{type:"number",min:0,max:100,placeholder:"年龄"},model:{value:e.searchForm.age,callback:function(t){e.$set(e.searchForm,"age",t)},expression:"searchForm.age"}})],1)],1),t("br"),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-input",{staticStyle:{width:"97%"},attrs:{placeholder:"住址"},model:{value:e.searchForm.address,callback:function(t){e.$set(e.searchForm,"address",t)},expression:"searchForm.address"}})],1),t("el-col",{attrs:{span:6}},[t("el-select",{attrs:{placeholder:"性别",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.sex,callback:function(t){e.$set(e.searchForm,"sex",t)},expression:"searchForm.sex"}},[t("el-option",{attrs:{label:"女",value:"0"}}),t("el-option",{attrs:{label:"男",value:"1"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-select",{attrs:{placeholder:"部门",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.deptId,callback:function(t){e.$set(e.searchForm,"deptId",t)},expression:"searchForm.deptId"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("br"),t("el-row",[t("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitSearchForm}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索")]),t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(t){e.newVisable=!0}}},[t("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"18px"}}),e._v(" 新建员工 ")])],1)],1),t("br"),t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{prop:"username",width:"130",label:"用户名"}}),t("el-table-column",{attrs:{width:"100",prop:"nickName",label:"姓名"}}),t("el-table-column",{attrs:{width:"50",prop:"sex",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"==t.row.sex?"男":"女")+" ")]}}])}),t("el-table-column",{attrs:{width:"50",prop:"age",label:"年龄"}}),t("el-table-column",{attrs:{width:"130","show-overflow-tooltip":!0,prop:"address",label:"住址"}}),t("el-table-column",{attrs:{width:"130","show-overflow-tooltip":!0,prop:"deptName",label:"所属部门"}}),t("el-table-column",{attrs:{width:"120","show-overflow-tooltip":!0,prop:"createTime",label:"入职时间"}}),t("el-table-column",{attrs:{width:"120","show-overflow-tooltip":!0,prop:"leaveTime",label:"离职时间"}}),t("el-table-column",{attrs:{width:"120",prop:"state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return["0"==a.row.state?t("el-tag",{attrs:{type:"success"}},[e._v("在职")]):t("el-tag",{attrs:{type:"danger"}},[e._v("离职")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"570",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.detailBtn(a.row)}}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"16px"}}),e._v(" 详情 ")]),t("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"success"},on:{click:function(t){return e.editBtn(a.row.id)}}},[t("i",{staticClass:"iconfont icon-r-edit",staticStyle:{"font-size":"16px"}}),e._v(" 修改")]),t("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger"},on:{click:function(t){return e.delBtn(a.row)}}},[t("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"16px"}}),e._v(" 删除")]),t("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"warning"},on:{click:function(t){return e.empRoleBtn(a.row.id)}}},[t("i",{staticClass:"iconfont icon-r-user1",staticStyle:{"font-size":"16px"}}),e._v(" 职务")]),t("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"warning"},on:{click:function(t){return e.resetPwd(a.row)}}},[t("i",{staticClass:"iconfont icon-r-lock",staticStyle:{"font-size":"16px"}}),e._v(" 重置密码")])]}}])})],1),t("div",{staticStyle:{margin:"10px 0 15px 0"}},[t("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),t("el-dialog",{attrs:{visible:e.detailVisable,width:"50%"},on:{"update:visible":function(t){e.detailVisable=t}}},[t("el-descriptions",{attrs:{model:e.detailForm,column:"2",title:"员工信息"}},[t("el-descriptions-item",{attrs:{label:"用户名"}},[e._v(e._s(e.detailForm.username))]),t("el-descriptions-item",{attrs:{label:"性别"}},[e._v(e._s("1"==e.detailForm.sex?"男":"女"))]),t("el-descriptions-item",{attrs:{label:"年龄"}},[e._v(e._s(e.detailForm.age))]),t("el-descriptions-item",{attrs:{label:"住址"}},[e._v(e._s(e.detailForm.address))]),t("el-descriptions-item",{attrs:{label:"昵称"}},[e._v(e._s(e.detailForm.nickName))]),t("el-descriptions-item",{attrs:{label:"头像"}},[t("img",{attrs:{src:e.BaseApi+e.detailForm.headImg,width:"30px"}})]),t("el-descriptions-item",{attrs:{label:"状态"}},["0"==e.detailForm.state?t("el-tag",{attrs:{type:"success"}},[e._v("在职")]):t("el-tag",{attrs:{type:"danger"}},[e._v("离职")])],1),t("el-descriptions-item",{attrs:{label:"系统管理员"}},[1==e.detailForm.isAdmin?t("el-tag",{attrs:{type:"success"}},[e._v("是")]):t("el-tag",{attrs:{type:"danger"}},[e._v("否")])],1),t("el-descriptions-item",{attrs:{label:"描述"}}),t("el-descriptions-item",{attrs:{label:"录入者"}},[e._v(e._s(e.detailForm.createby))]),t("el-descriptions-item",{attrs:{label:"所属部门"}},[e.detailForm.deptName?t("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.detailForm.deptName))]):e._e()],1),t("el-descriptions-item",{attrs:{label:"身份证号"}},[e._v(e._s(e.detailForm.idCard))]),t("el-descriptions-item",{attrs:{label:"入职时间"}},[e._v(e._s(e.detailForm.createTime))]),"0"!=e.detailForm.state?t("el-descriptions-item",{attrs:{label:"离职时间"}},[e._v(e._s(e.detailForm.leaveTime)+" ")]):e._e(),t("el-descriptions-item",{attrs:{label:"角色"}},[t("div",{staticStyle:{"flex-wrap":"wrap",display:"flex"}},e._l(e.detailForm.roleNames,(function(a){return t("el-tag",{key:a.id,attrs:{size:"mini",type:"success"}},[e._v(e._s(a))])})),1)])],1),t("el-button",{attrs:{type:"info"},on:{click:e.detail_down}},[e._v("关闭")])],1),t("el-dialog",{attrs:{title:"录入用户",visible:e.newVisable,size:"mini","label-width":"200",width:"50%"},on:{"update:visible":function(t){e.newVisable=t},close:e.dialog_imgClose}},[t("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{model:e.newForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"头像："}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.BaseApi+"/personnel_management/employee/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.BaseApi+e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"电话号码：",prop:"username"}},[t("el-input",{attrs:{max:"11"},model:{value:e.newForm.username,callback:function(t){e.$set(e.newForm,"username",t)},expression:"newForm.username"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名：",prop:"nickName"}},[t("el-input",{model:{value:e.newForm.nickName,callback:function(t){e.$set(e.newForm,"nickName",t)},expression:"newForm.nickName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"身份证号：",prop:"idCard"}},[t("el-input",{model:{value:e.newForm.idCard,callback:function(t){e.$set(e.newForm,"idCard",t)},expression:"newForm.idCard"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年龄："}},[t("el-input",{attrs:{type:"number",min:"18",max:"70"},model:{value:e.newForm.age,callback:function(t){e.$set(e.newForm,"age",t)},expression:"newForm.age"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属部门："}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择部门",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.newForm.deptId,callback:function(t){e.$set(e.newForm,"deptId",t)},expression:"newForm.deptId"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"住址："}},[t("el-input",{attrs:{type:"text"},model:{value:e.newForm.address,callback:function(t){e.$set(e.newForm,"address",t)},expression:"newForm.address"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"员工备注："}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newForm.info,expression:"newForm.info"}],attrs:{cols:"20",rows:"3"},domProps:{value:e.newForm.info},on:{input:function(t){t.target.composing||e.$set(e.newForm,"info",t.target.value)}}})])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别："}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.newForm.sex,callback:function(t){e.$set(e.newForm,"sex",t)},expression:"newForm.sex"}},[t("el-option",{attrs:{label:"女",value:"0"}}),t("el-option",{attrs:{label:"男",value:"1"}})],1)],1)],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitNewForm("newForm")}}},[e._v("提交")]),t("el-button",{on:{click:e.saveCancel}},[e._v("取消")])],1)],1)],1),t("el-dialog",{attrs:{title:"修改员工",visible:e.editVisable,size:"mini","label-width":"200",width:"50%"},on:{close:e.dialog_imgClose,"update:visible":function(t){e.editVisable=t}}},[t("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"头像："}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.BaseApi+"/personnel_management/employee/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.BaseApi+e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"电话号码：",prop:"username"}},[t("el-input",{attrs:{max:"11"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名：",prop:"nickName"}},[t("el-input",{model:{value:e.editForm.nickName,callback:function(t){e.$set(e.editForm,"nickName",t)},expression:"editForm.nickName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"身份证号：",prop:"idCard"}},[t("el-input",{model:{value:e.editForm.idCard,callback:function(t){e.$set(e.editForm,"idCard",t)},expression:"editForm.idCard"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年龄："}},[t("el-input",{attrs:{type:"number",min:"18",max:"70"},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属部门："}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择部门",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.editForm.deptId,callback:function(t){e.$set(e.editForm,"deptId",t)},expression:"editForm.deptId"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"住址："}},[t("el-input",{attrs:{type:"text"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"员工备注："}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editForm.info,expression:"editForm.info"}],attrs:{cols:"20",rows:"3"},domProps:{value:e.editForm.info},on:{input:function(t){t.target.composing||e.$set(e.editForm,"info",t.target.value)}}})])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别："}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},[t("el-option",{attrs:{label:"女",value:"0"}}),t("el-option",{attrs:{label:"男",value:"1"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态："}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.editForm.state,callback:function(t){e.$set(e.editForm,"state",t)},expression:"editForm.state"}},[t("el-option",{attrs:{label:"在职",value:"0"}}),t("el-option",{attrs:{label:"离职",value:"1"}})],1)],1)],1)],1),t("el-form-item",[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(t){return e.submitEditForm("editForm")}}},[t("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 提交")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:e.editCancel}},[e._v("取消")])],1)],1)],1),t("el-dialog",{attrs:{title:"分配职务",visible:e.empRoleVisable},on:{"update:visible":function(t){e.empRoleVisable=t}}},[t("div",[t("label",[e._v("已有职务：")]),t("el-select",{attrs:{disabled:"",size:"small",multiple:!0,filterable:"",placeholder:"没有职务"},model:{value:e.hasRoleIds,callback:function(t){e.hasRoleIds=t},expression:"hasRoleIds"}},e._l(e.allRoles,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("div",[t("label",[e._v("更改职务：")]),t("el-select",{attrs:{size:"small",name:"roleIds",multiple:!0,filterable:"",placeholder:"请选择职务"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.empRoleForm.empRoleIds,callback:function(t){e.$set(e.empRoleForm,"empRoleIds",t)},expression:"empRoleForm.empRoleIds"}},e._l(e.allRoles,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),t("br"),t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitRoleBtn}},[t("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 提交")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:e.roleBtnCancel}},[e._v("取消")])],1),t("el-dialog",{attrs:{title:"重置密码",visible:e.resetPwdVisable},on:{"update:visible":function(t){e.resetPwdVisable=t}},model:{value:e.resetPwdForm,callback:function(t){e.resetPwdForm=t},expression:"resetPwdForm"}},[t("el-form",[t("el-form-item",{attrs:{label:"密码："}},[t("el-input",{staticStyle:{width:"75%",margin:"0 auto",padding:"0"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.resetPwdForm.code,callback:function(t){e.$set(e.resetPwdForm,"code",t)},expression:"resetPwdForm.code"}})],1),t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitResetPwd}},[t("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 确定")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(t){e.resetPwdVisable=!1}}},[e._v("取消")])],1)],1)],1)},r=[],s=(a(7658),a(6932)),i=a(8151),o=a(3301),n=a(6159),c=a(9253),m={data(){return{BaseApi:this.$store.state.BaseApi,detailVisable:!1,newVisable:!1,editVisable:!1,empRoleForm:{},hasRoleIds:[],allRoles:[],detailForm:{},searchForm:{},editForm:{},options:[],tableData:[],resetPwdVisable:!1,newForm:{},empRoleVisable:!1,checked_keys:[],roles:[],resetPwdForm:{},rules:{username:[{required:!0,message:"手机号不能为空",trigger:"blur"}],nickName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],idCard:[{required:!0,message:"身份证号不能为空",trigger:"blur"}]},imageUrl:""}},methods:{deptAll(){(0,s.$g)({}).then((e=>{e=e.data,200==e.code?this.options=e.data:(0,i.gk)(e.msg,"error")}))},getRoleAll(){(0,n.DI)().then((e=>{e=e.data,200==e.code?this.allRoles=e.data:(0,i.gk)(e.msg,"warning")}))},init(){(0,o.bI)(this.searchForm).then((e=>{e=e.data,200==e.code?(this.tableData=e.data.records,this.searchForm.total=e.data.total,this.searchForm.pageSize=e.data.size,this.searchForm.currentPage=e.data.current):(0,i.gk)(e.msg,"error")}))},handleSizeChange(e){this.searchForm.pageSize=e,this.init(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.searchForm.currentPage=e,this.init(),console.log(`当前页: ${e}`)},submitSearchForm(){this.init()},detailBtn(e){(0,o.lA)(e.id).then((t=>{t=t.data,200==t.code?(this.detailForm=t.data,this.detailForm.deptName=e.deptName,this.detailVisable=!0):(0,i.gk)(t.msg,"error")})),console.log(this.detailForm)},detail_down(){this.detailForm={},this.detailVisable=!1},handleAvatarSuccess(e){this.imageUrl=e.url},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<3;return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 3MB!"),t&&a},submitNewForm(e){this.$refs[e].validate((e=>{e&&(this.newForm.headImg=this.imageUrl,(0,o.a1)(this.newForm).then((e=>{e=e.data,200==e.code?((0,i.gk)("操作成功"),this.newForm={},this.imageUrl="",this.newVisable=!1,this.init()):(0,i.gk)(e.msg,"error")})))}))},saveCancel(){this.newVisable=!1,this.imageUrl="",this.$refs["newForm"].resetFields()},editCancel(){this.editVisable=!1,this.imageUrl="",this.$refs["editForm"].resetFields(),this.editForm={}},editBtn(e){(0,o.Vw)(e).then((e=>{e=e.data,200==e.code?(this.editForm={...e.data},console.log(this.editForm),this.imageUrl=this.editForm.headImg,this.editVisable=!0):(0,i.gk)(e.msg,"error")}))},submitEditForm(e){this.$refs[e].validate((e=>{e&&(this.editForm.headImg=this.imageUrl,(0,o.Vx)(this.editForm).then((e=>{e=e.data,200==e.code?((0,i.gk)("操作成功"),this.editForm={},this.imageUrl="",this.editVisable=!1,this.init()):(0,i.gk)(e.msg,"error")})))}))},delBtn(e){this.$confirm("确定要将该员工办理离职?","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{"1"!=e.state?(0,o.jK)(e.id).then((e=>{e=e.data,200==e.code?((0,i.gk)("操作成功"),this.init()):(0,i.gk)(e.msg,"error")})):(0,i.gk)("已是离职状态","warning")})).catch((()=>{this.$message({type:"info",message:"已取消操作"})}))},dialog_imgClose(){this.imageUrl=""},empRoleBtn(e){this.empRoleForm.eid=e,(0,n.G$)(e).then((e=>{e=e.data,200==e.code?(this.empRoleForm.empRoleIds=e.data,this.hasRoleIds=e.data,this.empRoleVisable=!0):(0,i.gk)(e.msg,"warning")})),this.empRoleVisable=!0},submitRoleBtn(){JSON.stringify(this.hasRoleIds)===JSON.stringify(this.empRoleForm.empRoleIds)?(0,i.gk)("你未做改动...","warning"):this.$confirm("确定修改员工的职务?","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.empRoleForm.empRoleIds=this.empRoleForm.empRoleIds.toString(),(0,n.fi)(this.empRoleForm).then((e=>{e=e.data,200==e.code?((0,i.gk)("操作成功"),this.hasRoleIds=[],this.empRoleForm={},this.empRoleVisable=!1):(this.empRoleForm.empRoleIds=this.hasRoleIds,(0,i.gk)(e.msg,"error"))}))})).catch((()=>{this.$message({type:"info",message:"已取消操作"})}))},roleBtnCancel(){this.empRoleVisable=!1,this.hasRoleIds=[],this.empRoleIds=[]},resetPwd(e){this.resetPwdForm={},this.resetPwdForm.eid=e.id,this.resetPwdVisable=!0},submitResetPwd(){this.$confirm("确定要重置该账户的密码?","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,o.J$)(this.resetPwdForm).then((e=>{if(e=e.data,200==e.code){this.resetPwdVisable=!1;var t=(0,c.Nx)();t.id==this.resetPwdForm.eid&&((0,c._5)("employee"),(0,c._5)("token"),this.$router.push("/")),this.resetPwdForm={},(0,i.gk)("密码重置成功")}else(0,i.gk)(e.msg,"error")}))})).catch((()=>{this.$message({type:"info",message:"已取消操作"})}))}},mounted(){this.deptAll(),this.getRoleAll(),this.init()}},d=m,u=a(3736),p=(0,u.Z)(d,l,r,!1,null,null,null),f=p.exports},6932:function(e,t,a){a.d(t,{$g:function(){return s},Vx:function(){return o},a1:function(){return i},jK:function(){return n}});var l=a(8151);const r="/personnel_management/dept";function s(e){return(0,l.Ck)(r+"/list",e)}function i(e){return(0,l.tB)(r+"/save",e)}function o(e){return(0,l.tB)(r+"/update",e)}function n(e){return(0,l.tB)(r+"/deactivate",{id:e})}},3301:function(e,t,a){a.d(t,{J$:function(){return d},Vw:function(){return m},Vx:function(){return o},a1:function(){return i},bI:function(){return s},jK:function(){return n},lA:function(){return c}});var l=a(8151);const r="/personnel_management/employee";function s(e){return(0,l.tB)(r+"/list",e)}function i(e){return(0,l.tB)(r+"/save",e)}function o(e){return(0,l.tB)(r+"/update",e)}function n(e){return(0,l.tB)(r+"/deactivate",{id:e})}function c(e){return(0,l.Ck)(r+"/detail",{uid:e})}function m(e){return(0,l.Ck)(r+"/editbtn",{uid:e})}function d(e){return(0,l.tB)(r+"/resetPwd",e)}},6159:function(e,t,a){a.d(t,{$o:function(){return n},DI:function(){return d},G$:function(){return p},Uy:function(){return s},bC:function(){return m},fi:function(){return u},gi:function(){return i},jA:function(){return c},xP:function(){return o}});var l=a(8151);const r="/system/role";function s(e){return(0,l.tB)(r+"/list",e)}function i(e){return(0,l.tB)(r+"/forbiddenRole",{rid:e})}function o(e){return(0,l.tB)(r+"/edit_role",e)}function n(e){return(0,l.tB)(r+"/save",e)}function c(e){return(0,l.Ck)(r+"/checkPermissons",{rid:e})}function m(e){return(0,l.tB)(r+"/saveRolePermissons",e)}function d(){return(0,l.Ck)(r+"/all",{})}function u(e){return(0,l.tB)(r+"/saveRoleEmp",e)}function p(e){return(0,l.Ck)(r+"/queryRoleIdsByEid",{eid:e})}}}]);
//# sourceMappingURL=969.2923dd9f.js.map