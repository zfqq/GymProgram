"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[619],{1619:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"information"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("个人中心 ")]),t("el-breadcrumb-item",[e._v("个人资料")])],1),t("br"),e._m(0),t("br"),t("br"),t("el-form",{ref:"informationForm",staticClass:"demo-ruleForm",attrs:{model:e.informationForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:9291/personnel_management/employee/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.BaseApi+e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"电话号码：",prop:"username"}},[t("el-input",{attrs:{max:"11"},model:{value:e.informationForm.username,callback:function(t){e.$set(e.informationForm,"username",t)},expression:"informationForm.username"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"姓名：",prop:"nickName"}},[t("el-input",{model:{value:e.informationForm.nickName,callback:function(t){e.$set(e.informationForm,"nickName",t)},expression:"informationForm.nickName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"身份证号：",prop:"idCard"}},[t("el-input",{model:{value:e.informationForm.idCard,callback:function(t){e.$set(e.informationForm,"idCard",t)},expression:"informationForm.idCard"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"年龄："}},[t("el-input",{attrs:{type:"number",min:"18",max:"70"},model:{value:e.informationForm.age,callback:function(t){e.$set(e.informationForm,"age",t)},expression:"informationForm.age"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"所属部门："}},[t("el-select",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择部门",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.informationForm.deptId,callback:function(t){e.$set(e.informationForm,"deptId",t)},expression:"informationForm.deptId"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"住址："}},[t("el-input",{attrs:{type:"text"},model:{value:e.informationForm.address,callback:function(t){e.$set(e.informationForm,"address",t)},expression:"informationForm.address"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"备注："}},[t("el-input",{attrs:{type:"textarea",cols:"50",rows:"3"},model:{value:e.informationForm.info,callback:function(t){e.$set(e.informationForm,"info",t)},expression:"informationForm.info"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"性别："}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.informationForm.sex,callback:function(t){e.$set(e.informationForm,"sex",t)},expression:"informationForm.sex"}},[t("el-option",{attrs:{label:"女",value:"0"}}),t("el-option",{attrs:{label:"男",value:"1"}})],1)],1)],1)],1),t("el-form-item",[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(t){return e.submitInformationForm("informationForm")}}},[t("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 提交")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(t){return e.resetForm("informationForm")}}},[t("i",{staticClass:"iconfont icon-r-refresh",staticStyle:{"font-size":"18px"}}),e._v(" 重置")])],1)],1)],1)},o=[function(){var e=this,t=e._self._c;return t("i",{staticClass:"iconfont icon-r-paper",staticStyle:{"font-size":"32px"}},[t("b",{staticStyle:{"font-size":"28px"}},[e._v("完善个人资料")])])}],i=r(6932),a=r(8151);const s="/personal";function l(){return(0,a.Ck)(s+"/information",{})}var c=r(3301),u=r(9253),m={data(){return{BaseApi:this.$store.state.BaseApi,loginEid:(0,u.Nx)().id,informationForm:{},imageUrl:"",options:[],rules:{username:[{required:!0,message:"手机号不能为空",trigger:"blur"}],nickName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],idCard:[{required:!0,message:"身份证号不能为空",trigger:"blur"}]}}},methods:{deptAll(){(0,i.$g)({}).then((e=>{e=e.data,200==e.code?this.options=e.data:(0,a.gk)(e.msg,"error")}))},init(){l().then((e=>{e=e.data,200==e.code?(this.informationForm={...e.data},this.imageUrl=this.informationForm.headImg):(0,a.gk)(e.msg,"error")}))},submitInformationForm(e){this.$refs[e].validate((e=>{e&&(0,c.Vx)(this.informationForm).then((e=>{e=e.data,200==e.code?(0,a.gk)("更新成功"):(0,a.gk)(e.msg,"error"),this.init()}))}))},resetForm(e){this.$refs[e].resetFields(),this.init()},handleAvatarSuccess(e){this.informationForm.headImg=e.url,this.imageUrl=e.url},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024/1024<3;return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 3MB!"),t&&r}},mounted(){this.imageUrl="",this.deptAll(),this.init()}},f=m,d=r(3736),p=(0,d.Z)(f,n,o,!1,null,null,null),h=p.exports},6932:function(e,t,r){r.d(t,{$g:function(){return i},Vx:function(){return s},a1:function(){return a},jK:function(){return l}});var n=r(8151);const o="/personnel_management/dept";function i(e){return(0,n.Ck)(o+"/list",e)}function a(e){return(0,n.tB)(o+"/save",e)}function s(e){return(0,n.tB)(o+"/update",e)}function l(e){return(0,n.tB)(o+"/deactivate",{id:e})}},3301:function(e,t,r){r.d(t,{J$:function(){return m},Vw:function(){return u},Vx:function(){return s},a1:function(){return a},bI:function(){return i},jK:function(){return l},lA:function(){return c}});var n=r(8151);const o="/personnel_management/employee";function i(e){return(0,n.tB)(o+"/list",e)}function a(e){return(0,n.tB)(o+"/save",e)}function s(e){return(0,n.tB)(o+"/update",e)}function l(e){return(0,n.tB)(o+"/deactivate",{id:e})}function c(e){return(0,n.Ck)(o+"/detail",{uid:e})}function u(e){return(0,n.Ck)(o+"/editbtn",{uid:e})}function m(e){return(0,n.tB)(o+"/resetPwd",e)}},9253:function(e,t,r){r.d(t,{LP:function(){return i},Nx:function(){return s},_5:function(){return l},gy:function(){return a}});var n=r(4858);const o="token";function i(){return n.Z.get(o)}function a(){return n.Z.remove(o)}function s(){let e=n.Z.get("employee");return JSON.parse(e)}function l(e){n.Z.remove(e)}},8151:function(e,t,r){r.d(t,{Ck:function(){return d},gk:function(){return p},ml:function(){return f},tB:function(){return m}});var n=r(9253),o=r(6154),i=r(4720),a=r(4858),s=r(129),l=r.n(s);const c="http://59.110.94.218:9291";function u(){var e=(0,n.LP)();return e&&(0,o.Z)({url:c+"/checkedToken",method:"GET",params:{token:e}}).then((e=>{e=e.data,200==e.code&&(a.Z.set("token",e.data.token,{expires:1/48}),a.Z.set("employee",JSON.stringify(e.data.employee),{expires:1/48}))})).catch((e=>{console.log(e)})),e}function m(e,t){return(0,o.Z)({url:c+e,method:"POST",headers:{token:u()},data:l().stringify(t)}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?p(e,"error"):p(e.response.data,"error")}))}function f(e,t){return(0,o.Z)({url:c+e,method:"POST",headers:{"Content-Type":"application/json",token:u()},data:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?p(e,"error"):p(e.response.data,"error")}))}function d(e,t){return(0,o.Z)({url:c+e,method:"GET",headers:{token:u()},params:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?p(e,"error"):p(e.response.data,"error")}))}function p(e,t){switch(t){case"warning":i.Message.warning(e);break;case"error":i.Message.error({message:e,duration:5e3,showClose:!0});break;case"info":i.Message.info(e);break;default:i.Message.success(e)}}},4858:function(e,t){
/*! js-cookie v3.0.1 | MIT */
function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var n={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function o(e,t){function n(n,o,i){if("undefined"!==typeof document){i=r({},t,i),"number"===typeof i.expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=n+"="+e.write(o,n)+a}}function i(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=e.read(a,s),t===s)break}catch(l){}}return t?n[t]:n}}return Object.create({set:n,get:i,remove:function(e,t){n(e,"",r({},t,{expires:-1}))},withAttributes:function(e){return o(this.converter,r({},this.attributes,e))},withConverter:function(e){return o(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var i=o(n,{path:"/"});t["Z"]=i}}]);
//# sourceMappingURL=619.90f7ba36.js.map